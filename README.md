# DIPLOM
Дипломная работа: Автоматизированные UI и API тесты для https://www.kinopoisk.ru/

Задача проекта:
Разработка автоматизированных API-тестов для проверки функциональности поискового сервиса. Тесты покрывают различные сценарии работы с API, включая позитивные и негативные кейсы. Разработка автоматизированных UI-тестов с использованием:
•	Selenium WebDriver (через unittest.mock)
•	Pytest как фреймворка для тестирования
•	Requests как Python библиотека для отправки HTTP-запросов
•	Allure для создания детальных отчетов о тестировании

Структура проекта
├── test\test_api.py          # Основной файл с API тестами
├── test\base_api.py          # Базовый класс для работы с API
├── test\data.py              # Тестовые данные и конфигурация
├── test\test_ui.py           # Основной файл с API тестами
├── requirements.txt          # Зависимости проекта
├── README.md                 # Документация проекта

1. Установка зависимостей
pip install -r requirements.txt
Требуемые пакеты:
•	selenium==4.15.0
•	pytest==7.4.3
•	allure-pytest==2.13.2
•	webdriver-manager==4.0.1
•	pylint==2.17.5
•	autopep8==2.0.2
•	requests==2.31.0

2. Настройка тестовых данных:
В файле data.py необходимо указать актуальный API ключ
API_KEY = "KVPX4R-PMRMV1-KX3X8P-QZK5E1"  # Замените на актуальный рабочий ключ

    API тесты
Описание методов и входных/выходных данных
Класс BaseAPI (base_api.py)
Метод: search(query)
•	Назначение: Выполнение поискового запроса к API
•	Входные данные:
o	query (str): поисковый запрос
•	Выходные данные: Response object с полями:
o	status_code (int): HTTP статус код ответа
o	text (str): тело ответа в текстовом формате
o	json() (dict): распарсенный JSON ответ (если применимо)
•	HTTP метод: GET/POST
•	Endpoint: /search
Класс TestData (предполагаемая реализация в data.py)
Константы:
•	SEARCH_CYRILLIC = "Матрица" - кириллический запрос
•	SEARCH_LATIN = "Matrix" - латинский запрос
•	SEARCH_SPECIAL = "!@#$%^&*()" - запрос со спецсимволами
•	SEARCH_EMPTY = "" - пустой запрос
Детальное описание тестовых шагов через Allure
Тест 1: Поиск по кириллице
•	Allure Feature: API Tests
•	Allure Story: Поиск по кириллице
•	Цель: Проверить обработку кириллических запросов
Шаги:
1.	Выполнение поиска - отправка запроса с кириллическим текстом
o	Входные данные: TestData.SEARCH_CYRILLIC ("Матрица")
2.	Проверка статуса ответа - убедиться, что API вернул статус 200
3.	Проверка наличия результата - проверить, что ответ содержит искомый текст
Тест 2: Поиск по латинице
•	Story: Поиск по латинице
•	Цель: Проверить обработку латинских запросов
Шаги:
1.	Выполнение поиска - отправка запроса с латинским текстом
o	Входные данные: TestData.SEARCH_LATIN ("Matrix")
2.	Проверка статуса ответа - статус 200
3.	Проверка наличия результата - ответ содержит латинский запрос
Тест 3: Поиск по спецсимволам
•	Story: Поиск по спецсимволам
•	Цель: Проверить обработку запросов со специальными символами
Шаги:
1.	Выполнение поиска - отправка запроса со спецсимволами
o	Входные данные: TestData.SEARCH_SPECIAL ("!@#$%^&*()")
2.	Проверка статуса ответа - ожидается статус 200 (успешная обработка)
Тест 4: Поиск без API ключа
•	Story: Поиск без API ключа
•	Цель: Проверить авторизацию API
Шаги:
1.	Выполнение запроса без ключа - удаление API ключа из headers
o	Headers: {'Content-Type': 'application/json'}
2.	Проверка статуса ответа - ожидается статус 401 (Unauthorized)
Тест 5: Поиск пустого запроса
•	Story: Поиск пустого запроса
•	Цель: Проверить обработку пустых запросов
Шаги:
1.	Выполнение поиска пустого запроса - отправка пустой строки
o	Входные данные: TestData.SEARCH_EMPTY ("")
2.	Проверка статуса ответа - ожидается статус 200
Тест 6: Поиск с невалидным API ключом
•	Story: Поиск с невалидным API ключом
•	Цель: Проверить валидацию API ключа
Шаги:
1.	Выполнение запроса с невалидным ключом - установка некорректного ключа
o	API Key: BAD-KEY
2.	Проверка статуса ответа - ожидается статус 401 (Unauthorized)

Импорты:
•	allure - для декораторов и шагов в отчетах
•	TestData - класс с тестовыми данными из файла data.py
•	BaseAPI - базовый класс API клиента из base_api.py
Структура тестов:
Каждый тестовый метод содержит:
1.	Allure декораторы - для структурирования отчета
2.	Docstring - описание цели теста
3.	Шаги выполнения - логические блоки в with allure.step()
4.	Assertions - проверки ожидаемого поведения
Логика тестирования:
Позитивные тесты:
•	test_search_cyrillic - проверка поддержки кириллицы
•	test_search_latin - проверка поддержки латиницы
•	test_search_special - проверка обработки спецсимволов
•	test_search_empty - проверка edge case с пустым запросом
Негативные тесты:
•	test_no_api_key - проверка авторизации без ключа
•	test_invalid_api_key - проверка авторизации с неверным ключом
Ключевые особенности:
•	Каждый тест независим (создает свой экземпляр API)
•	Четкое разделение на шаги выполнения и проверок
•	Использование констант из TestData для удобства поддержки
•	Подробные сообщения в шагах для читаемости отчетов
	
    UI тесты
Описание методов и входных/выходных данных
Класс KinopoiskPage
Метод: get_search_input()
•	Назначение: Получение элемента поля поиска
•	Входные данные: Нет
•	Выходные данные: WebElement (мок-объект) поля поиска
•	Локатор: By.NAME, "kp_query"
Метод: get_logo()
•	Назначение: Получение элемента логотипа
•	Входные данные: Нет
•	Выходные данные: WebElement (мок-объект) логотипа
•	Локатор: By.CLASS_NAME, "header-logo"
Метод: search(query)
•	Назначение: Выполнение поиска по запросу
•	Входные данные:
o	query (str): поисковый запрос
•	Выходные данные: Нет
•	Действия: очистка поля, ввод текста, отправка формы
Метод: click_logo()
•	Назначение: Клик по логотипу
•	Входные данные: Нет
•	Выходные данные: Нет
Фикстура mock_driver
•	Назначение: Создание мок-объекта WebDriver
•	Возвращает: Настроенный MagicMock объект, имитирующий WebDriver
•	Настройки:
o	Элементы всегда visible и enabled
o	Заголовок: "КиноПоиск"
o	URL: "https://www.kinopoisk.ru/"
Детальное описание тестовых шагов через Allure
Тест 1: Загрузка страницы
•	Allure Epic: UI Тесты Кинопоиска
•	Allure Feature: Базовые тесты с моками
•	Allure Story: Загрузка страницы
•	Severity: BLOCKER
Шаги:
1.	Проверка заголовка - проверяет наличие "КиноПоиск" в заголовке
o	Прикрепление: page_title с текстом заголовка
2.	Проверка URL - проверяет наличие "kinopoisk.ru" в URL
o	Прикрепление: page_url с текстом URL

Тест 2: Элементы интерфейса
•	Story: Элементы интерфейса
•	Severity: CRITICAL
Шаги:
1.	Проверка поля поиска - проверяет видимость и доступность поля
o	Прикрепление: search_input_ok
2.	Проверка логотипа - проверяет отображение логотипа
o	Прикрепление: logo_ok

Тест 3: Функциональность поиска
•	Story: Функциональность поиска
•	Severity: CRITICAL
Шаги:
1.	Выполнение поиска - выполняет поиск с запросом "Интерстеллар"
2.	Проверка вызовов методов - проверяет корректность вызовов Selenium методов
o	Прикрепление: method_calls_verified с детальной информацией

Тест 4: Навигация
•	Story: Навигация
•	Severity: NORMAL
Шаги:
1.	Клик по логотипу - выполняет клик по логотипу
2.	Проверка клика - проверяет факт вызова метода click
o	Прикрепление: logo_click_confirmed

Тест 5: Ввод данных
•	Story: Ввод данных
•	Severity: NORMAL
Шаги:
1.	Тест ввода текста - проверяет ввод текста в поле
o	Прикрепление: text_input_ok
2.	Тест очистки поля - проверяет очистку поля ввода
o	Прикрепление: clear_ok

Запуск тестов
# Запуск всех тестов
pytest

# Запуск API тестов
pytest test_api.py

# Запуск UI тестов
pytest test_ui.py

# Запуск с генерацией Allure отчета
pytest --alluredir=allure-results

Генерация отчетов
Для просмотра детальных отчетов после запуска тестов:
allure serve allure-results
Отчет будет содержать:
•	Дерево тестов с группировкой по features/stories
•	Детальные шаги выполнения каждого теста
•	Статусы выполнения и прикрепленные логи
•	Графики и статистику выполнения


Ссылка на финальный проект
https://github.com/GolikoVVV/DIPLOM

